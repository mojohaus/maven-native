<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 2.0.0 from src/site/apt/usage.apt at 2026-01-18
 | Rendered using Apache Maven Fluido Skin 2.1.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 2.0.0" />
    <meta name="author" content="Dan T. Tran" />
    <meta name="author" content="dantran@gmail.com" />
    <meta name="date" content="September 29, 2005" />
    <title>Native Maven Plugin: Usage – Native Maven Plugin</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-2.1.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-2.1.0.min.js"></script>
    <!-- Matomo -->
    <script>
        var _paq = window._paq = window._paq || [];
        _paq.push(['disableCookies']);
        _paq.push(['trackPageView']);
        _paq.push(['enableLinkTracking']);

        (function() {
            var u="https://analytics.apache.org/";
            _paq.push(['setTrackerUrl', u+'/matomo.php']);
            _paq.push(['setSiteId', '18']);
            var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
            g.async=true; g.src=u+'/matomo.js'; s.parentNode.insertBefore(g,s);
        })();
    </script>
    <!-- End Matomo Code -->
    <style>.github-fork-ribbon:before { background-color: gray; }</style>
  </head>
  <body>
    <a class="github-fork-ribbon right-top" href="https://github.com/mojohaus/native-maven-plugin" data-ribbon="Fork me on GitHub">Fork me on GitHub</a>
    <div class="container-fluid container-fluid-top">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><h1><a href="../../../"><img src="../../../images/mojo_logo.png" alt="MojoHaus" /></a></h1></div></div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
      <li><a href="../../../">MojoHaus</a><span class="divider">/</span></li>
      <li><a href="../../../mojo-parent">MojoHaus Parent</a><span class="divider">/</span></li>
      <li><a href="../index.html">Maven Native</a><span class="divider">/</span></li>
      <li><a href="index.html">Native Maven Plugin</a><span class="divider">/</span></li>
    <li class="active">Native Maven Plugin: Usage <a href="https://github.com/mojohaus/maven-native/native-maven-plugin/src/site/apt/usage.apt"><img src="./images/accessories-text-editor.png" alt="Edit" /></a></li>
        <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2026-01-18</li>
          <li id="projectVersion" class="pull-right"><span class="divider">|</span>Version: 1.0.0</li>
        <li class="pull-right"><a href="https://maven.apache.org/">Maven</a></li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Overview</li>
    <li><a href="index.html">Introduction</a></li>
    <li><a href="plugin-info.html">Goals</a></li>
    <li class="active"><a>Usage</a></li>
    <li><a href="howto.html">FAQ</a></li>
    <li><a href="lifecycle.html">Build Lifecycle</a></li>
    <li><a href="providers.html">Providers</a></li>
    <li><a href="envfactory.html">Environments</a></li>
   <li class="nav-header">Examples</li>
    <li><a href="examples/jni-dll.html">jni-dll</a></li>
    <li><a href="examples/static-lib-ranlib.html">ar-ranlib</a></li>
    <li><a href="examples/share-lib.html">share-lib</a></li>
    <li><a href="examples/gcj.html">gcj</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="project-reports.html"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
<a href="https://maven.apache.org/" class="builtBy" target="_blank"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn" class="span10">
<section><a id="Usage"></a>
<h1>Usage</h1>
<p>The following contains summary of all available goals in native-maven-plugin. They work together in a Maven custom build lifecycle</p>
<ul>
<li>Determine your packaging type </li>
<li>Determine your linker dependencies</li>
<li>Determine your include paths and source files</li>
<li>Determine your compiler and linker providers</li>
<li>Determine your compiler and linker arguments </li></ul><section><a id="Packaging_Type"></a>
<h2>Packaging Type</h2>
<p>Native plugin supports the following packaging types:</p>
<ul>
<li>dll</li>
<li>exe</li>
<li>lib</li>
<li>a</li>
<li>o</li>
<li>so</li>
<li>sl</li>
<li>dylib</li>
<li>jnilib</li>
<li>uexe</li></ul>
<p>One of these packaging types will go into the your pom.xml's packaging element.</p>
<p>The native build lifecyle uses packaging type as the extension of the build artifact( ie dll, exe, lib, etc ). However, it has minimal knowledge to build each specific extension. You must configure appropriate compiler/linker options at build phase.</p>
<p>&quot;uexe&quot; is a place holder for executable without extension name usually found on UNIX environment. The final artifact will have extension of &quot;uexe&quot;. </p>
<p>Since this plugin uses its own lifecycle, you need to enable plugin's <i>extensions</i> to true</p>
<p>Here is example of declaring your packaging type and plugin header</p>
<pre>  
  &lt;project&gt;
   ...
   &lt;packaging&gt;so&lt;/packaging&gt;
   ...
   &lt;build&gt;   
     &lt;plugins&gt;
       &lt;plugin&gt;
         &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
         &lt;artifactId&gt;native-maven-plugin&lt;/artifactId&gt;
         &lt;extensions&gt;true&lt;/extensions&gt;
         &lt;configuration&gt;
            ...
         &lt;/configuration&gt;
       &lt;/plugin&gt;
     &lt;/plugins&gt;
   &lt;/build&gt;</pre></section><section><a id="Dependencies"></a>
<h2>Dependencies</h2>
<ul>
<li>Dependencies with type <i>lib</i>, <i>so</i> and <i>a</i>, <i>sl</i>, <i>jnilib</i>, <i>dylib</i> <i>o</i>, and <i>obj</i> will be linked to final artifact at link step.</li>
<li>Dependencies with type <i>inczip</i> are unpacked to be part of system include path at compile time.</li>
<li>You can explicitly add linker dependencies through normal linker option.</li></ul>
<p>Internally, this plugin copies all dependencies to ${project.build.directory}/lib without the version tag. </p>
<p>The following example shows 2 .so dependency files, and other files in linker option to be linked to the final output file.</p>
<pre>  
  &lt;project&gt;
   ...
   &lt;dependencies&gt;
     &lt;dependency&gt;
       &lt;groupId&gt;someGroup&lt;/groupId&gt;
       &lt;artifactId&gt;someId&lt;/artifactId&gt;
       &lt;version&gt;someVersion&lt;/version&gt;
       &lt;type&gt;so&lt;/type&gt;
     &lt;/dependency&gt;
     &lt;dependency&gt;
       &lt;groupId&gt;someGroup&lt;/groupId&gt;
       &lt;artifactId&gt;someId2&lt;/artifactId&gt;
       &lt;version&gt;someVersion&lt;version&gt;
       &lt;type&gt;so&lt;/type&gt;
     &lt;/dependency&gt;
     &lt;dependency&gt;
       &lt;groupId&gt;someGroup&lt;/groupId&gt;
       &lt;artifactId&gt;someId2&lt;/artifactId&gt;
       &lt;version&gt;someVersion&lt;version&gt;
       &lt;type&gt;inczip&lt;/type&gt;
     &lt;/dependency&gt;
   &lt;/dependencies&gt;
   
   &lt;build&gt;
     &lt;plugins&gt;
       &lt;plugin&gt;
         &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
         &lt;artifactId&gt;native-maven-plugin&lt;/artifactId&gt;
         &lt;extensions&gt;true&lt;/extensions&gt;
         &lt;configuration&gt;
           ....
           &lt;linkerStartOptions&gt;
             &lt;linkerStartOption&gt;-shared -lxml2 -lz -lpthread -ldl&lt;/linkerStartOption&gt; 
           &lt;/linkerStartOptions&gt;
         &lt;/configuration&gt;
       &lt;/plugin&gt;
     &lt;/plugins&gt;
   &lt;/build&gt;
    </pre></section><section><a id="Include_paths_and_source_files"></a>
<h2>Include paths and source files </h2>
<p>Include paths and source files are configured using <i>Source</i> configuration. The following example shows a set of compilable source files consist of:</p>
<ul>
<li>All <i>.cpp</i> files, <i>file1.c</i>, and <i>file2.c</i> under <i>${basedir}/../src/main/native</i> directory excluding <i>somefile.cpp</i></li>
<li><i>file3.c</i> and <i>file4.c</i> under ${basedir}/src/main/native&gt;</li></ul>
<p>Include paths consist of all &lt;<a id="directory">directory</a>&gt; under &lt;<a id="sources">sources</a>&gt;</p>
<pre>
   &lt;build&gt;   
     &lt;plugins&gt;
       &lt;plugin&gt;
         &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
         &lt;artifactId&gt;native-maven-plugin&lt;/artifactId&gt;
         &lt;extensions&gt;true&lt;/extensions&gt;
         &lt;configuration&gt;
           .....
           &lt;sources&gt;
             &lt;source&gt;
               &lt;-- relative to your project directory --&gt;
               &lt;directory&gt;../src/main/native&lt;/directory&gt;
               &lt;!-- ant base wild card files&gt;
               &lt;includes&gt;
                 &lt;include&gt;**/*.cpp&lt;/include&gt;
               &lt;/includes&gt;
               &lt;excludes&gt;
                 &lt;exclude&gt;somefile.cpp&lt;/exclude&gt;
               &lt;/excludes&gt;
               &lt;fileNames&gt;
                 &lt;fileName&gt;file1.c&lt;/fileName&gt;
                 &lt;fileName&gt;file2.c&lt;/fileName&gt;
               &lt;/fileNames&gt;
             &lt;/source&gt;
             &lt;source&gt;
               &lt;directory&gt;src/main/native&lt;/directory&gt; 
               &lt;fileNames&gt;
                 &lt;fileName&gt;file3.c&lt;/fileName&gt;
                 &lt;fileName&gt;file4.c&lt;/fileName&gt;
                 &lt;fileName&gt;...&lt;/fileName&gt;
               &lt;/fileNames&gt;
             &lt;/source&gt;          
            
             &lt;!-- additional include path --&gt;
             &lt;source&gt;
               &lt;directory&gt;...&lt;/directory&gt;
               &lt;!-- use this to have maven deploying header files with a .inzip type --&gt;
               &lt;!-- typically used to for library artifacts header files ---&gt;
               &lt;deployable&gt;true&lt;/deployable&gt;
             &lt;/source&gt;          

             &lt;!-- additional system include path --&gt;
             &lt;source&gt;
               &lt;directory&gt;...&lt;/directory&gt;
               &lt;dependencyAnalysisParticipation&gt;false&lt;/dependencyAnalysisParticipation&gt;
             &lt;/source&gt;          
           &lt;/sources&gt;
           ....         
         &lt;/configuration&gt;
       &lt;/plugin&gt;
     &lt;/plugins&gt;
   &lt;/build&gt;</pre></section><section><a id="Compiler.2FLinker_Provider"></a>
<h2>Compiler/Linker Provider</h2>
<p>If you are on a UNIX system, use the default <i>generic</i>, or <i>generic-classic</i> but overwrite <i>compilerExecutable</i> and <i>linkerExecutable</i> configuration specific to your build. Default values for both generic compiler and linker are &quot;gcc&quot;. Ensure the executables are on your path.</p>
<p>On Windows, use Windows supported compiler and linker such as &quot;msvc&quot; and &quot;bcc&quot;</p>
<p>Each provided compiler/linker provider assumes minimal knowledge of available options. The following contains a list of options that will be automatically injected to final command lines:</p>
<ul>
<li>/c for all compilers</li>
<li>Output options such as &quot;-o&quot; for generic compiler/linker, &quot;-Fo&quot; for msvc compiler, and &quot;/out:&quot; msvc linker, etc. </li></ul>
<p>Other notes:</p>
<ul>
<li>Javah goal is invoked automatically at <i>generate-sources</i> phase for all shared library ( dll, so, etc ). See example for details. However, it is skipped when there is no <i>javahClassNames</i> available. </li>
<li>Manifest goal is invoked right after linker step for MSVC that support manifest file ( ie Visual Studio 2005 and 2008 )</li>
<li>Concurrent compilations are supported via <i>numberOfConcurrentCompilation</i> configuration.</li></ul>
<p>The following example use <i>generic-classic</i> with executable as <i>CC</i>. Note since we dont change the linker provider, it is will use the same name as the compiler provider name.</p>
<pre>
   &lt;build&gt;   
     &lt;plugins&gt;
       &lt;plugin&gt;
          ...
         &lt;configuration&gt;
           &lt;compilerProvider&gt;generic-classic&lt;/compilerProvider&gt;
           &lt;compilerExecutable&gt;CC&lt;/compilerExecutable&gt;
           ....         
         &lt;/configuration&gt;
       &lt;/plugin&gt;
     &lt;/plugins&gt;
   &lt;/build&gt;
   </pre></section><section><a id="Compiler.2FLinker_arguments"></a>
<h2>Compiler/Linker arguments </h2>
<p>You can inject your specific compiler and linker arguments to the final compiler and linker command lines via:</p>
<ul>
<li>&lt;compilerStartOptions&gt;</li>
<li>&lt;compilerMiddleOptions&gt;</li>
<li>&lt;compilerEndOptions&gt;</li>
<li>&lt;linkerStartOptions&gt;</li>
<li>&lt;linkerMiddleOptions&gt;</li>
<li>&lt;linkerEndOptions&gt; </li></ul>
<p>Usually a pair of &lt;compilerStartOptions&gt; and &lt;linkerStartOptions&gt; should be sufficient.</p></section></section>        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>©      2005–2026
<a href="https://www.mojohaus.org">MojoHaus</a>
</p>
        </div>
      </div>
    </footer>
  </body>
</html>