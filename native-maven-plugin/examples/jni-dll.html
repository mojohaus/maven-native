<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 2.0.0 from src/site/apt/examples/jni-dll.apt at 2026-01-18
 | Rendered using Apache Maven Fluido Skin 2.1.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 2.0.0" />
    <meta name="author" content="Dan T. Tran" />
    <meta name="author" content="dantran@gmail.com" />
    <meta name="date" content="September 29, 2005" />
    <title>Maven 2 Native Plugin – Native Maven Plugin</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-2.1.0.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
    <script src="../js/apache-maven-fluido-2.1.0.min.js"></script>
    <!-- Matomo -->
    <script>
        var _paq = window._paq = window._paq || [];
        _paq.push(['disableCookies']);
        _paq.push(['trackPageView']);
        _paq.push(['enableLinkTracking']);

        (function() {
            var u="https://analytics.apache.org/";
            _paq.push(['setTrackerUrl', u+'/matomo.php']);
            _paq.push(['setSiteId', '18']);
            var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
            g.async=true; g.src=u+'/matomo.js'; s.parentNode.insertBefore(g,s);
        })();
    </script>
    <!-- End Matomo Code -->
    <style>.github-fork-ribbon:before { background-color: gray; }</style>
  </head>
  <body>
    <a class="github-fork-ribbon right-top" href="https://github.com/mojohaus/native-maven-plugin" data-ribbon="Fork me on GitHub">Fork me on GitHub</a>
    <div class="container-fluid container-fluid-top">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><h1><a href="../../../../"><img src="../../../../images/mojo_logo.png" alt="MojoHaus" /></a></h1></div></div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
      <li><a href="../../../../">MojoHaus</a><span class="divider">/</span></li>
      <li><a href="../../../../mojo-parent">MojoHaus Parent</a><span class="divider">/</span></li>
      <li><a href="../../index.html">Maven Native</a><span class="divider">/</span></li>
      <li><a href="../index.html">Native Maven Plugin</a><span class="divider">/</span></li>
    <li class="active">Maven 2 Native Plugin <a href="https://github.com/mojohaus/maven-native/native-maven-plugin/src/site/apt/examples/jni-dll.apt"><img src="../images/accessories-text-editor.png" alt="Edit" /></a></li>
        <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2026-01-18</li>
          <li id="projectVersion" class="pull-right"><span class="divider">|</span>Version: 1.0.0</li>
        <li class="pull-right"><a href="https://maven.apache.org/">Maven</a></li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Overview</li>
    <li><a href="../index.html">Introduction</a></li>
    <li><a href="../plugin-info.html">Goals</a></li>
    <li><a href="../usage.html">Usage</a></li>
    <li><a href="../howto.html">FAQ</a></li>
    <li><a href="../lifecycle.html">Build Lifecycle</a></li>
    <li><a href="../providers.html">Providers</a></li>
    <li><a href="../envfactory.html">Environments</a></li>
   <li class="nav-header">Examples</li>
    <li class="active"><a>jni-dll</a></li>
    <li><a href="../examples/static-lib-ranlib.html">ar-ranlib</a></li>
    <li><a href="../examples/share-lib.html">share-lib</a></li>
    <li><a href="../examples/gcj.html">gcj</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="../project-info.html"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="../project-reports.html"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
<a href="https://maven.apache.org/" class="builtBy" target="_blank"><img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn" class="span10">
<section><a id="Build_a_MSVC_DLL_with_JNI_headers_generated_by_javah"></a>
<h1>Build a MSVC DLL with JNI headers generated by javah</h1>
<p>The example uses javah to generate native header files which are then be part of the native build to create a Windows DLL</p>
<p>Note:</p>
<ul>
<li>User is responsible to provide all neccessary compiler and linker options</li>
<li>envFactoryName is used to set up compiler and linker specific environments. This feature is extremely useful when you need to use various compilers in your build system and it is impossible to set up single global environment to accomodate all compilers.</li>
<li>Checkout real examples in <a class="externalLink" href="http://svn.codehaus.org/mojo/trunk/mojo/maven-native/native-maven-plugin/src/it/">svn</a></li></ul>
<pre>&lt;project&gt;
   ...
   &lt;packaging&gt;dll&lt;/packaging&gt;
   
   &lt;dependencies&gt;
     &lt;dependency&gt;
       your jar which has jni interface.
     &lt;/dependency&gt;
     &lt;dependency&gt;
       other native library ( .lib, .so, .a, .o, etc)
       to be linked in.
     &lt;/dependency&gt;
     ...
   &lt;/dependencies&gt;
   
   ...

   &lt;build&gt;   
     &lt;plugins&gt;
       &lt;plugin&gt;
         &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
         &lt;artifactId&gt;native-maven-plugin&lt;/artifactId&gt;
         &lt;extensions&gt;true&lt;/extensions&gt;
         &lt;configuration&gt;

           &lt;!-- trigger javah execution --&gt;         
           &lt;javahClassNames&gt;
             &lt;javahClassName&gt;class1&lt;/javahClassName&gt;
             &lt;javahClassName&gt;class2&lt;/javahClassName&gt;              
             &lt;javahClassName&gt;...&lt;/javahClassName&gt;
           &lt;/javahClassNames&gt;
           &lt;!-- enable additional javah interface in dependencies list --&gt;
           &lt;javahSearchJNIFromDependencies&gt;true&lt;/javahSearchJNIFromDependencies&gt;
           &lt;!-- 
            | Add jdk include directories to system include path
            | Override ${jkdIncludePath} If your jdk does not conform to Sun JDK layout
            --&gt;
           &lt;javahOS&gt;win32&lt;/javahOS&gt;

           &lt;!-- setup compiler and linker environment according to msvc 6 vcvars32.bat --&gt;
           &lt;!-- without this setting, you will need to setup the environment outside   --&gt;
           &lt;!-- of Maven                                                               --&gt;
           &lt;envFactoryName&gt;org.codehaus.mojo.natives.msvc.MSVC6EnvFactory&lt;/envFactoryName&gt;
         
           &lt;compilerProvider&gt;msvc&lt;/compilerProvider&gt;
           
           &lt;compilerStartOptions&gt;
             &lt;compilerStartOption&gt; /MD /W4 -O&lt;/compilerStartOption&gt;
             &lt;compilerStartOption&gt;-D_WIN32_WINNT=0x0500 &lt;/compilerStartOption&gt;
           &lt;/compilerStartOptions&gt;
          
           &lt;sources&gt;
             &lt;source&gt;
               &lt;-- relative to your project directory --&gt;
               &lt;directory&gt;../src/main/native&lt;/directory&gt;
               &lt;fileNames&gt;
                 &lt;fileName&gt;file1.c&lt;/fileName&gt;
                 &lt;fileName&gt;file2.c&lt;/fileName&gt;
                 &lt;fileName&gt;...&lt;/fileName&gt;
               &lt;/fileNames&gt;
             &lt;/source&gt;
             &lt;source&gt;
               &lt;directory&gt;src/main/native&lt;/directory&gt; 
               &lt;fileNames&gt;
                 &lt;fileName&gt;file3.c&lt;/fileName&gt;
                 &lt;fileName&gt;file4.c&lt;/fileName&gt;
                 &lt;fileName&gt;...&lt;/fileName&gt;
               &lt;/fileNames&gt;
             &lt;/source&gt;          
            
             &lt;!-- additional include path --&gt;
             &lt;source&gt;
               &lt;directory&gt;...&lt;/directory&gt;
             &lt;/source&gt;          

             &lt;!-- additional system include path --&gt;
             &lt;source&gt;
               &lt;directory&gt;...&lt;/directory&gt;
               &lt;dependencyAnalysisParticipation&gt;false&lt;/dependencyAnalysisParticipation&gt;
             &lt;/source&gt;          
           &lt;/sources&gt;

           &lt;!-- deploy the accompany .lib file as well --&gt;          
           &lt;linkerSecondaryOutputExtensions&gt;lib&lt;/linkerSecondaryOutputExtensions &gt;
          
           &lt;linkerStartOptions&gt;
             &lt;linkerStartOption&gt; /INCREMENTAL:NO /DLL user32.lib advapi32.lib oldnames.lib kernel32.lib &lt;/linkerStartOption&gt;
           &lt;/linkerStartOptions&gt;
         &lt;/configuration&gt;
        
    &lt;/build&gt;
    
    
&lt;/project&gt;</pre></section>        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>©      2005–2026
<a href="https://www.mojohaus.org">MojoHaus</a>
</p>
        </div>
      </div>
    </footer>
  </body>
</html>